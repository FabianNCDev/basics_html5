<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Learning WebRTC - Get User Media</title>
  </head>
  <body>
    <video autoplay></video>
    <script>
    function hasUserMedia() {
      return !!(
        navigator.getUserMedia
        || navigator.webkitGetUserMedia
        || navigator.mozGetUserMedia
        || navigator.msGetUserMedia
      );
    }
    if(hasUserMedia()){
      navigator.getUserMedia = navigator.getUserMedia
      || navigator.webkitGetUserMedia || navigator.mozGetUserMedia
      || navigator.msGetUserMedia;

      navigator.getUserMedia({video:true, audio: true}
        , function (stream) {
          var video = document.querySelector('video');

          // Since elements cannot accept the JavaScript objects as
          // parameters, it needs some string to fetch the video stream from. This function takes
          // the stream object and turns it into a local URL that it can get the stream data from.
          video.src = window.URL.createObjectURL(stream);
      }, function (err) {});
    }else{
      alert("Sorry, your browser does not support getUserMedia.");
    }
    </script>
  </body>
</html>
